{"version":3,"sources":["animation.js","calculations.js"],"names":["Sprite","a","getAngle","b","Math","atan2","y","x","PI","mod","lineDistance","c","d","sqrt","pointFromAngle","cos","sin","getRandomArbitary","random","getRandomInt","floor","chance","isFacing","center","angle","abs","isIntersecting1","e","line_intersects","f","g","h","k","CCW","isIntersecting","lineIntersectsShip","width","height","explode","document","createElement","className","$","body","append","offsetWidth","offsetHeight","style","top","left","transform","explosions","push","explosionSound","play","Projectile","this","owner","target","type","health","damage","ctx","speedX","speedY","acceleration","turnSpeed","image","Image","src","onload","render","game","requestAnimationFrame","canvas","clearRect","drawImage","bg","length","enemies","isColliding","Firefly","projectiles","update","ui","showHealth","Ship","status","lastStatusChange","Infinity","cooldownTime","inaccuracy","cooldown","window","innerWidth","innerHeight","fireImg","takingFireImg","Object","extend","maxHealth","imageSrc","createPlayer","destroy","turn","mousePosition","move","forward","keyDown","KEYS","UP_ARROW","KEY_W","back","DOWN_ARROW","KEY_S","LEFT_ARROW","KEY_A","right","RIGHT_ARROW","KEY_D","SPACE","fireMissile","laserSound","mouseDown","BUTTONS","LEFT","fireGun","draw","alert","createEnemy","speed","firing","filter","SoundPool","pool","Audio","volume","setVolume","mute","muted","currentTime","ended","Playlist","pause","next","isPlaying","paused","addEventListener","newGame","location","reload","continueGame","hide","pauseGame","show","checkMouseButtons","mouseDownCount","console","log","disableKeys","indexOf","which","preventDefault","warn","prototype","hasClass","propertyName","offset","remove","drawRotated","translate","rotate","updateCenter","Array","playlist","backgroundAudio","getElementById","getContext","onresize","setTimeout","takingFire","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","deleteMeAudio","togglePlayers","musicPlayer","speechPlayer","effectsPlayer","settings","id","volumeDown","round","volumeUp","nextTrack","fillStyle","fillRect","keys","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","PAUSE","CAPS_LOCK","ESCAPE","PAGE_UP","PAGE_DOWN","END","HOME","INSERT","DELETE","KEY_0","KEY_1","KEY_2","KEY_3","KEY_4","KEY_5","KEY_6","KEY_7","KEY_8","KEY_9","KEY_B","KEY_C","KEY_E","KEY_F","KEY_G","KEY_H","KEY_I","KEY_J","KEY_K","KEY_L","KEY_M","KEY_N","KEY_O","KEY_P","KEY_Q","KEY_R","KEY_T","KEY_U","KEY_V","KEY_X","KEY_Y","KEY_Z","LEFT_META","RIGHT_META","SELECT","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","MULTIPLY","ADD","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUM_LOCK","SCROLL_LOCK","SEMICOLON","EQUALS","COMMA","DASH","PERIOD","FORWARD_SLASH","GRAVE_ACCENT","OPEN_BRACKET","BACK_SLASH","CLOSE_BRACKET","SINGLE_QUOTE","MIDDLE","RIGHT","clientX","clientY","button","class","text","appendTo","delay","fadeOut","onerror","hasOwnProperty"],"mappings":"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","file":"main.min.js","sourcesContent":["\"use strict\";\r\nfunction Sprite(options) {\r\n    //var path = options.path;\r\n    var width = options.width;\r\n    var height = options.height;\r\n    var frames = options.frames;\r\n    var duration = options.duration;\r\n    var context = options.context;\r\n\r\n    var frame = 0; \r\n}\r\n\r\nSprite.prototype = {\r\n    draw: function draw(point) {\r\n    }\r\n};","\"use strict\";\r\n// Find angle between two points.\r\nfunction getAngle(p1, p2) {\r\n    return Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;\r\n}\r\n\r\n// Euclidean modulo.\r\nfunction mod(x, value) {\r\n    return x >= 0 ? x % value : value + x % value;\r\n}\r\n\r\n// Distance between two points.\r\nfunction lineDistance(point1, point2) {\r\n    var xs = 0;\r\n    var ys = 0;\r\n\r\n    xs = point2.x - point1.x;\r\n    xs = xs * xs;\r\n\r\n    ys = point2.y - point1.y;\r\n    ys = ys * ys;\r\n\r\n    return Math.sqrt(xs + ys);\r\n}\r\n\r\n// Point from distance and angle\r\nfunction pointFromAngle(point, angle, distance) {\r\n    var radians = angle * (Math.PI / 180);\r\n\r\n    var x = Math.cos(radians) * distance;\r\n    var y = Math.sin(radians) * distance;\r\n\r\n    x = point.x + x;\r\n    y = point.y + y;\r\n\r\n    return { x: x, y: y };\r\n}\r\n\r\n//function Point(x, y) {\r\n//    return { x: x, y: y }\r\n//}\r\n\r\n\r\n// Returns a random number between min and max.\r\nfunction getRandomArbitary(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\n// Returns a random integer between min and max.\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n// Return true x percent of the time.\r\nfunction chance(percentage) {\r\n    return Math.random() * 100 < percentage;\r\n}\r\n\r\n// Returns the angle if ship1 is facing ship2.\r\nfunction isFacing(ship1, ship2) {\r\n    var result = false;\r\n    var diff = getAngle(ship1.center, ship2.center) - ship1.angle;\r\n    if (Math.abs(diff) < 100)\r\n        result = diff;\r\n\r\n    return result;\r\n}\r\n\r\n// http://gamedev.stackexchange.com/a/26022/36040\r\nfunction isIntersecting1(Point1, Point2, Point3, Point4) {\r\n    var denominator = ((Point2.x - Point1.x) * (Point4.y - Point3.y)) - ((Point2.y - Point1.y) * (Point4.x - Point3.x));\r\n    var numerator1 = ((Point1.y - Point3.y) * (Point4.x - Point3.x)) - ((Point1.x - Point3.x) * (Point4.y - Point3.y));\r\n    var numerator2 = ((Point1.y - Point3.y) * (Point2.x - Point1.x)) - ((Point1.x - Point3.x) * (Point2.y - Point1.y));\r\n\r\n    // Detect coincident lines (has a problem, read below)\r\n    if (denominator == 0)\r\n        return numerator1 == 0 && numerator2 == 0;\r\n\r\n    var r = numerator1 / denominator;\r\n    var s = numerator2 / denominator;\r\n\r\n    return (r >= 0 && r <= 1) && (s >= 0 && s <= 1);\r\n}\r\n\r\n// Adapted from: http://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect/1968345#1968345\r\nfunction line_intersects(p0_x, p0_y, p1_x, p1_y, p2_x, p2_y, p3_x, p3_y) {\r\n    var s1_x, s1_y, s2_x, s2_y;\r\n    s1_x = p1_x - p0_x;\r\n    s1_y = p1_y - p0_y;\r\n    s2_x = p3_x - p2_x;\r\n    s2_y = p3_y - p2_y;\r\n\r\n    var s, t;\r\n    s = (-s1_y * (p0_x - p2_x) + s1_x * (p0_y - p2_y)) / (-s2_x * s1_y + s1_x * s2_y);\r\n    t = (s2_x * (p0_y - p2_y) - s2_y * (p0_x - p2_x)) / (-s2_x * s1_y + s1_x * s2_y);\r\n\r\n    if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\r\n        // Collision detected\r\n        return 1;\r\n    }\r\n\r\n    return 0; // No collision\r\n}\r\n\r\n// http://stackoverflow.com/a/16725715/2407212\r\nfunction CCW(p1, p2, p3) {\r\n    return (p3.y - p1.y) * (p2.x - p1.x) > (p2.y - p1.y) * (p3.x - p1.x);\r\n}\r\n\r\nfunction isIntersecting(p1, p2, p3, p4) {\r\n    return (CCW(p1, p3, p4) != CCW(p2, p3, p4)) && (CCW(p1, p2, p3) != CCW(p1, p2, p4));\r\n}\r\n\r\nfunction lineIntersectsShip(startpoint, endpoint, ship) {\r\n    // Corners.\r\n    var p1 = { x: ship.x, y: ship.y };\r\n    var p2 = { x: ship.x + ship.width, y: ship.y };\r\n    var p3 = { x: ship.x + ship.width, y: ship.y + ship.height };\r\n    var p4 = { x: ship.x, y: ship.y + ship.height };\r\n\r\n    // Check if bullet line intersects the ship outline.\r\n    return isIntersecting(startpoint, endpoint, p1, p2) ||\r\n        isIntersecting(startpoint, endpoint, p2, p3) ||\r\n        isIntersecting(startpoint, endpoint, p3, p4) ||\r\n        isIntersecting(startpoint, endpoint, p4, p1);\r\n}"]}